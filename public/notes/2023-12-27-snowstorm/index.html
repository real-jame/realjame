<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Website snowstorm effect | realjame</title>

    <link rel="stylesheet" href="/css/main.css">


</head>
<body>
  <header>
    <h1>realjame</h1>

  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/blog/">Blog</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/notes/">Notes</a>
    </li>
    <li>
      <a href="/projects/">Projects</a>
    </li>
    <li>
      <a href="/contact/">Contact</a>
    </li>
    </ul>
  </nav>


  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/blog/">Blog</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/notes/">Notes</a>
    </li>
    <li>
      <a href="/projects/">Projects</a>
    </li>
    <li>
      <a href="/contact/">Contact</a>
    </li>
    </ul>
  </nav>

  </header>
  <main>
    
  <h1>Website snowstorm effect</h1>

  
  
  <time datetime="2023-12-27T00:00:00&#43;00:00">December 27, 2023</time>

  <p>For the holidays, I added a simple snowing effect.</p>
<p><img src="/note/media/snowstorm.gif" alt="Recording of a falling snow effect being overlayed on my website"></p>
<p>It&rsquo;s not actually my code, but I did make a simple control to toggle the snow effect.</p>
<h2 id="adding-the-snowing-effect">Adding the snowing effect</h2>
<p>I was playing around with the classic <a href="https://www.schillmania.com/projects/snowstorm/">snowstorm.js script by Scott Schiller</a>, but I could never get it to properly turn on and off without requiring a page reload when making button. Plus, it always looked super distracting no matter what I did.</p>
<p>There&rsquo;s another popular(?) alternative that&rsquo;s implemented without any JavaScript, which is excellent.</p>
<p><a href="https://pajasevi.github.io/CSSnowflakes/">CSSnowflakes</a></p>
<h2 id="some-tweaks">Some tweaks</h2>
<p>I replaced the snowflake symbol (❅) used with a simple white circle emoji (⚪). I also made every other snowflake slightly smaller and more transparent, using a bit of CSS.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">snowflake</span>:<span style="color:#a6e22e">nth-child</span><span style="color:#f92672">(</span><span style="color:#f92672">odd</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: rgba(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0.8</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="coding-in-the-onoff-toggle">Coding in the on/off toggle</h2>
<p>Here&rsquo;s my code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;snow-toggle&#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toggleClick()&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">img</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/assets/silk/weather_snow.png&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Toggle Snow&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;snow-icon&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>  #snow-toggle {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">right</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  #snow-icon {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">max-width</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">32</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">32</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    image-rendering: <span style="color:#66d9ef">pixelated</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">savedSettings</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#e6db74">&#34;snowSettings&#34;</span>)) <span style="color:#f92672">||</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">snowEffect</span><span style="color:#f92672">:</span> <span style="color:#f92672">!</span>(window.<span style="color:#a6e22e">matchMedia</span> <span style="color:#f92672">&amp;&amp;</span> window.<span style="color:#a6e22e">matchMedia</span>(<span style="color:#e6db74">&#34;(prefers-reduced-motion: reduce)&#34;</span>).<span style="color:#a6e22e">matches</span>),
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">snow</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">savedSettings</span>.<span style="color:#a6e22e">snowEffect</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">updateSnowing</span>() {
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;snowflakes&#34;</span>).<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">display</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">snow</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;block&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;none&#34;</span>;
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;snow-icon&#39;</span>).<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">snow</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;/assets/silk/weather_snow.png&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/assets/silk/weather_sun.png&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">saveSettings</span>();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">snow</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updateSnowing</span>() <span style="color:#75715e">// apply previously saved changes on page load
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">toggleClick</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">snow</span> <span style="color:#f92672">=</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">snow</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">updateSnowing</span>();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">saveSettings</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">settings</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">snowEffect</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">snow</span>,
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">setItem</span>(<span style="color:#e6db74">&#39;snowSettings&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">settings</span>));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><p>The code creates a button with an image (pulled from the icon pack I&rsquo;m using) in HTML. It makes it absolutely positioned in CSS, so it&rsquo;ll always show on the bottom right corner of the screen.</p>
<p>In JS, it simply toggles displaying the snow by setting the <code>display</code> style rule of the <code>&lt;div&gt;</code> containing snowflakes between <code>none</code> and <code>block</code>. It also saves the user&rsquo;s preference with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">LocalStorage</a>, which I think is pretty neat. There&rsquo;s probably a more efficient way to write it than all the boilerplate I did with JSON and objects and stuff, but oh well.</p>
<p>If there&rsquo;s no saved preference, the code hides snow by default if the user <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion">prefers reduced motion</a>, because accessibility is swag.</p>
<p>Happy holidays!</p>
<p>-jame</p>

  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="/tags/tech/">Tech</a></li>
        <li><a href="/tags/web/">Web</a></li>
    </ul>
  </div>


  </main>
  <footer>
    <p>Copyright 2024. All rights reserved.</p>

  </footer>
</body>
</html>
